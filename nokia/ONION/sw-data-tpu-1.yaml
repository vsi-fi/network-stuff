network_name: P1
debug: true
device_name: sw-data-tpu-1
unnumbered_routing: true

interfaces:
  - name: lo0
    admin-state: enable
    subinterfaces:
      - unit: 100
        ipv4:
          admin-state: enable
          address: 10.1.100.1/32

  - name: ethernet-1/1
    admin-state: enable
    mtu: 9412
    vlan-tagging: "true"
    subinterfaces:
      - unit: 100
        vlan: 100
        ipv4:
          admin-state: enable
          unnumbered: lo0.100
        ipv6:
          admin-state: enable
          router_advertisement: true 
  - name: ethernet-1/2
    admin-state: enable
    mtu: 9412
    vlan-tagging: "true"
    subinterfaces:
      - unit: 100
        vlan: 100
        ipv4:
          admin-state: enable
          unnumbered: lo0.100
        ipv6:
          admin-state: enable
          router_advertisement: true 
  - name: ethernet-1/10
    admin-state: enable
    mtu: 9412
    vlan-tagging: "true"
    subinterfaces:
      - unit: 123 
        vlan: 123
        type: bridged 
  - name: irb123
    admin-state: enable
    subinterfaces:
      - unit: 0
        ipv4:
          admin-state: enable
          address: 192.168.192.1/24
routing_policies:
  - name: ipv4-export
    terms:
      - term: 100
        action: accept
        match:
          - protocol: local
  - name: ipv4-import
    terms:
      - term: 100
        action: accept
        match:
          - protocol: bgp

vrfs:
  - name: sw_data
    type: mac-vrf
    interfaces:
      - ethernet-1/10.123
      - irb123.0
  - name: data
    type: ip-vrf
    loopback: system0.100
    router_id: 10.100.1.1
    autonomous-system: 4200100000 
    interfaces:
      - irb123.0
      - lo0.100
      - ethernet-1/1.100
      - ethernet-1/2.100
    bgp:
      groups:
        - name: P1_DATA
          admin_state: enable
          export-policy: "[ ipv4-export ]"
          import-policy: "[ ipv4-import ]"
          afi:
            - ipv4-unicast
      dynamic-neigbors:
        groups:
          - name: P1_DATA
            allowed_as: "[ 4200000000 ]"
            group: P1_DATA
            enable_bfd: "true"
            interfaces:
              - ethernet-1/1.100
              - ethernet-1/2.100
